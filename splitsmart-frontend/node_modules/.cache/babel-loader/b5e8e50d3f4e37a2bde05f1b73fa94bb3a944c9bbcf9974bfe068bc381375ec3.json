{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Attach JWT token to every request\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Handle 401 - redirect to login\nAPI.interceptors.response.use(res => res, err => {\n  var _err$response;\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n    localStorage.clear();\n    window.location.href = '/login';\n  }\n  return Promise.reject(err);\n});\n\n// Helper: backend wraps all responses in { success, message, data: {...} }\n// This unwraps to get the inner data\nconst unwrap = res => {\n  var _res$data$data, _res$data;\n  return (_res$data$data = (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data) !== null && _res$data$data !== void 0 ? _res$data$data : res.data;\n};\n\n// Auth\nexport const authAPI = {\n  register: async data => {\n    const res = await API.post('/auth/register', data);\n    return unwrap(res); // returns AuthResponse { accessToken, user, ... }\n  },\n  login: async data => {\n    const res = await API.post('/auth/login', data);\n    return unwrap(res);\n  }\n};\n\n// Groups\nexport const groupAPI = {\n  getAll: async () => {\n    const res = await API.get('/groups');\n    return unwrap(res);\n  },\n  getById: async id => {\n    const res = await API.get(`/groups/${id}`);\n    return unwrap(res);\n  },\n  create: async data => {\n    const res = await API.post('/groups', data);\n    return unwrap(res);\n  },\n  addMember: async (groupId, email) => {\n    const res = await API.post(`/groups/${groupId}/members`, {\n      email\n    });\n    return unwrap(res);\n  }\n};\n\n// Expenses\nexport const expenseAPI = {\n  getByGroup: async (groupId, page = 0, size = 20) => {\n    const res = await API.get(`/expenses/group/${groupId}?page=${page}&size=${size}`);\n    return unwrap(res);\n  },\n  create: async data => {\n    const res = await API.post('/expenses', data);\n    return unwrap(res);\n  },\n  delete: async id => {\n    const res = await API.delete(`/expenses/${id}`);\n    return unwrap(res);\n  }\n};\n\n// Settlements\nexport const settlementAPI = {\n  getByGroup: async groupId => {\n    const res = await API.get(`/settlements/group/${groupId}`);\n    return unwrap(res);\n  },\n  markPaid: async settlementId => {\n    const res = await API.put(`/settlements/${settlementId}/pay`);\n    return unwrap(res);\n  }\n};\n\n// Dashboard\nexport const dashboardAPI = {\n  getSummary: async () => {\n    const res = await API.get('/dashboard/summary');\n    return unwrap(res);\n  }\n};\n\n// AI\nexport const aiAPI = {\n  getInsights: async () => {\n    const res = await API.get('/ai/insights');\n    return unwrap(res);\n  }\n};","map":{"version":3,"names":["axios","API","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","res","err","_err$response","status","clear","window","location","href","Promise","reject","unwrap","_res$data$data","_res$data","data","authAPI","register","post","login","groupAPI","getAll","get","getById","id","addMember","groupId","email","expenseAPI","getByGroup","page","size","delete","settlementAPI","markPaid","settlementId","put","dashboardAPI","getSummary","aiAPI","getInsights"],"sources":["D:/SmartSplitter/splitsmart-frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  headers: { 'Content-Type': 'application/json' }\n});\n\n// Attach JWT token to every request\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Handle 401 - redirect to login\nAPI.interceptors.response.use(\n  res => res,\n  err => {\n    if (err.response?.status === 401) {\n      localStorage.clear();\n      window.location.href = '/login';\n    }\n    return Promise.reject(err);\n  }\n);\n\n// Helper: backend wraps all responses in { success, message, data: {...} }\n// This unwraps to get the inner data\nconst unwrap = (res) => res.data?.data ?? res.data;\n\n// Auth\nexport const authAPI = {\n  register: async (data) => {\n    const res = await API.post('/auth/register', data);\n    return unwrap(res);  // returns AuthResponse { accessToken, user, ... }\n  },\n  login: async (data) => {\n    const res = await API.post('/auth/login', data);\n    return unwrap(res);\n  },\n};\n\n// Groups\nexport const groupAPI = {\n  getAll: async () => {\n    const res = await API.get('/groups');\n    return unwrap(res);\n  },\n  getById: async (id) => {\n    const res = await API.get(`/groups/${id}`);\n    return unwrap(res);\n  },\n  create: async (data) => {\n    const res = await API.post('/groups', data);\n    return unwrap(res);\n  },\n  addMember: async (groupId, email) => {\n    const res = await API.post(`/groups/${groupId}/members`, { email });\n    return unwrap(res);\n  },\n};\n\n// Expenses\nexport const expenseAPI = {\n  getByGroup: async (groupId, page = 0, size = 20) => {\n    const res = await API.get(`/expenses/group/${groupId}?page=${page}&size=${size}`);\n    return unwrap(res);\n  },\n  create: async (data) => {\n    const res = await API.post('/expenses', data);\n    return unwrap(res);\n  },\n  delete: async (id) => {\n    const res = await API.delete(`/expenses/${id}`);\n    return unwrap(res);\n  },\n};\n\n// Settlements\nexport const settlementAPI = {\n  getByGroup: async (groupId) => {\n    const res = await API.get(`/settlements/group/${groupId}`);\n    return unwrap(res);\n  },\n  markPaid: async (settlementId) => {\n    const res = await API.put(`/settlements/${settlementId}/pay`);\n    return unwrap(res);\n  },\n};\n\n// Dashboard\nexport const dashboardAPI = {\n  getSummary: async () => {\n    const res = await API.get('/dashboard/summary');\n    return unwrap(res);\n  },\n};\n\n// AI\nexport const aiAPI = {\n  getInsights: async () => {\n    const res = await API.get('/ai/insights');\n    return unwrap(res);\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}