{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 15000\n});\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\nAPI.interceptors.response.use(res => res, err => {\n  var _err$response, _err$config, _err$config$url;\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 && !((_err$config = err.config) !== null && _err$config !== void 0 && (_err$config$url = _err$config.url) !== null && _err$config$url !== void 0 && _err$config$url.includes('/auth/'))) {\n    localStorage.clear();\n    window.location.href = '/login';\n  }\n  return Promise.reject(err);\n});\nconst unwrap = res => {\n  const b = res.data;\n  return b && typeof b === 'object' && 'data' in b ? b.data : b;\n};\nexport const authAPI = {\n  register: async d => unwrap(await API.post('/auth/register', d)),\n  login: async d => unwrap(await API.post('/auth/login', d))\n};\nexport const groupAPI = {\n  getAll: async () => {\n    try {\n      return unwrap(await API.get('/groups')) || [];\n    } catch {\n      return [];\n    }\n  },\n  getById: async id => unwrap(await API.get(`/groups/${id}`)),\n  create: async d => unwrap(await API.post('/groups', d)),\n  addMember: async (gId, uId) => unwrap(await API.post(`/groups/${gId}/members?userId=${uId}`)),\n  getMembers: async id => {\n    try {\n      return unwrap(await API.get(`/groups/${id}/members`)) || [];\n    } catch {\n      return [];\n    }\n  },\n  searchUsers: async q => {\n    try {\n      return unwrap(await API.get(`/groups/search-users?q=${encodeURIComponent(q)}`)) || [];\n    } catch {\n      return [];\n    }\n  },\n  joinByCode: async code => unwrap(await API.post(`/groups/join/${code}`))\n};\nexport const expenseAPI = {\n  getByGroup: async gId => {\n    try {\n      const d = unwrap(await API.get(`/expenses/group/${gId}?page=0&size=50`));\n      return Array.isArray(d) ? d : (d === null || d === void 0 ? void 0 : d.content) || [];\n    } catch {\n      return [];\n    }\n  },\n  create: async d => unwrap(await API.post('/expenses', d))\n};\nexport const settlementAPI = {\n  getPending: async () => {\n    try {\n      return unwrap(await API.get('/settlements/pending')) || [];\n    } catch {\n      return [];\n    }\n  },\n  getByGroup: async gId => {\n    try {\n      return unwrap(await API.get(`/settlements/group/${gId}`)) || [];\n    } catch {\n      return [];\n    }\n  },\n  settle: async (id, paymentMethod, txId) => unwrap(await API.post(`/settlements/${id}/settle`, {\n    paymentMethod: paymentMethod || null,\n    transactionId: txId || null\n  })),\n  sendReminder: async id => unwrap(await API.post(`/settlements/${id}/remind`))\n};\nexport const notificationAPI = {\n  getAll: async () => {\n    try {\n      return unwrap(await API.get('/notifications')) || [];\n    } catch {\n      return [];\n    }\n  },\n  getUnreadCount: async () => {\n    try {\n      return unwrap(await API.get('/notifications/unread-count')) || 0;\n    } catch {\n      return 0;\n    }\n  },\n  markAllRead: async () => unwrap(await API.post('/notifications/mark-all-read')),\n  markRead: async id => unwrap(await API.post(`/notifications/${id}/read`))\n};\nexport const userAPI = {\n  getMe: async () => {\n    try {\n      return unwrap(await API.get('/profile'));\n    } catch {\n      return null;\n    }\n  },\n  updateProfile: async d => unwrap(await API.patch('/profile', d)),\n  updateUpi: async upiId => unwrap(await API.patch('/profile/upi', {\n    upiId\n  }))\n};\nexport const aiAPI = {\n  getInsights: async () => {\n    try {\n      return unwrap(await API.get('/ai/insights')) || [];\n    } catch {\n      return [];\n    }\n  },\n  triggerAnalyze: async () => {\n    try {\n      return unwrap(await API.post('/ai/analyze'));\n    } catch {\n      return null;\n    }\n  },\n  markRead: async id => {\n    try {\n      return unwrap(await API.patch(`/ai/insights/${id}/read`));\n    } catch {}\n  }\n};\nexport const dashboardAPI = {\n  get: async () => {\n    try {\n      return unwrap(await API.get('/dashboard')) || {};\n    } catch {\n      return {};\n    }\n  }\n};\nexport const errMsg = err => {\n  var _err$response2, _err$response2$data;\n  return (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || (err === null || err === void 0 ? void 0 : err.message) || 'Something went wrong';\n};","map":{"version":3,"names":["axios","API","create","baseURL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","res","err","_err$response","_err$config","_err$config$url","status","url","includes","clear","window","location","href","Promise","reject","unwrap","b","data","authAPI","register","d","post","login","groupAPI","getAll","get","getById","id","addMember","gId","uId","getMembers","searchUsers","q","encodeURIComponent","joinByCode","code","expenseAPI","getByGroup","Array","isArray","content","settlementAPI","getPending","settle","paymentMethod","txId","transactionId","sendReminder","notificationAPI","getUnreadCount","markAllRead","markRead","userAPI","getMe","updateProfile","patch","updateUpi","upiId","aiAPI","getInsights","triggerAnalyze","dashboardAPI","errMsg","_err$response2","_err$response2$data","message"],"sources":["D:/SmartSplitter/splitsmart-frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  headers: { 'Content-Type': 'application/json' },\n  timeout: 15000,\n});\n\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\nAPI.interceptors.response.use(\n  res => res,\n  err => {\n    if (err.response?.status === 401 && !err.config?.url?.includes('/auth/')) {\n      localStorage.clear(); window.location.href = '/login';\n    }\n    return Promise.reject(err);\n  }\n);\n\nconst unwrap = (res) => {\n  const b = res.data;\n  return (b && typeof b === 'object' && 'data' in b) ? b.data : b;\n};\n\nexport const authAPI = {\n  register: async (d) => unwrap(await API.post('/auth/register', d)),\n  login:    async (d) => unwrap(await API.post('/auth/login', d)),\n};\n\nexport const groupAPI = {\n  getAll:      async ()         => { try { return unwrap(await API.get('/groups')) || []; }                                              catch { return []; } },\n  getById:     async (id)       => unwrap(await API.get(`/groups/${id}`)),\n  create:      async (d)        => unwrap(await API.post('/groups', d)),\n  addMember:   async (gId, uId) => unwrap(await API.post(`/groups/${gId}/members?userId=${uId}`)),\n  getMembers:  async (id)       => { try { return unwrap(await API.get(`/groups/${id}/members`)) || []; }                               catch { return []; } },\n  searchUsers: async (q)        => { try { return unwrap(await API.get(`/groups/search-users?q=${encodeURIComponent(q)}`)) || []; }    catch { return []; } },\n  joinByCode:  async (code)     => unwrap(await API.post(`/groups/join/${code}`)),\n};\n\nexport const expenseAPI = {\n  getByGroup: async (gId) => {\n    try {\n      const d = unwrap(await API.get(`/expenses/group/${gId}?page=0&size=50`));\n      return Array.isArray(d) ? d : (d?.content || []);\n    } catch { return []; }\n  },\n  create: async (d) => unwrap(await API.post('/expenses', d)),\n};\n\nexport const settlementAPI = {\n  getPending:   async ()    => { try { return unwrap(await API.get('/settlements/pending')) || []; }       catch { return []; } },\n  getByGroup:   async (gId) => { try { return unwrap(await API.get(`/settlements/group/${gId}`)) || []; } catch { return []; } },\n  settle:       async (id, paymentMethod, txId) =>\n    unwrap(await API.post(`/settlements/${id}/settle`, { paymentMethod: paymentMethod || null, transactionId: txId || null })),\n  sendReminder: async (id)  => unwrap(await API.post(`/settlements/${id}/remind`)),\n};\n\nexport const notificationAPI = {\n  getAll:         async ()    => { try { return unwrap(await API.get('/notifications')) || []; }               catch { return []; } },\n  getUnreadCount: async ()    => { try { return unwrap(await API.get('/notifications/unread-count')) || 0; }  catch { return 0;  } },\n  markAllRead:    async ()    => unwrap(await API.post('/notifications/mark-all-read')),\n  markRead:       async (id)  => unwrap(await API.post(`/notifications/${id}/read`)),\n};\n\nexport const userAPI = {\n  getMe:         async ()       => { try { return unwrap(await API.get('/profile')); } catch { return null; } },\n  updateProfile: async (d)      => unwrap(await API.patch('/profile', d)),\n  updateUpi:     async (upiId)  => unwrap(await API.patch('/profile/upi', { upiId })),\n};\n\nexport const aiAPI = {\n  getInsights:    async ()    => { try { return unwrap(await API.get('/ai/insights')) || []; }        catch { return []; }   },\n  triggerAnalyze: async ()    => { try { return unwrap(await API.post('/ai/analyze')); }              catch { return null; } },\n  markRead:       async (id)  => { try { return unwrap(await API.patch(`/ai/insights/${id}/read`)); } catch {}              },\n};\n\nexport const dashboardAPI = {\n  get: async () => { try { return unwrap(await API.get('/dashboard')) || {}; } catch { return {}; } },\n};\n\nexport const errMsg = (err) =>\n  err?.response?.data?.message || err?.message || 'Something went wrong';\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}