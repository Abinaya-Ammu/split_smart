{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 15000\n});\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\nAPI.interceptors.response.use(res => res, err => {\n  var _err$response, _err$config, _err$config$url;\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 && !((_err$config = err.config) !== null && _err$config !== void 0 && (_err$config$url = _err$config.url) !== null && _err$config$url !== void 0 && _err$config$url.includes('/auth/'))) {\n    localStorage.clear();\n    window.location.href = '/login';\n  }\n  return Promise.reject(err);\n});\n\n// Backend wraps everything: { success, message, data: <actual payload> }\nconst unwrap = res => {\n  const body = res.data;\n  if (body && typeof body === 'object' && 'data' in body) return body.data;\n  return body;\n};\nconst errMsg = err => {\n  var _err$response2, _err$response2$data, _err$response3, _err$response3$data;\n  return (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || (err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.data) || (err === null || err === void 0 ? void 0 : err.message) || 'Something went wrong';\n};\nexport const authAPI = {\n  register: async d => unwrap(await API.post('/auth/register', d)),\n  login: async d => unwrap(await API.post('/auth/login', d))\n};\nexport const groupAPI = {\n  getAll: async () => {\n    try {\n      return unwrap(await API.get('/groups')) || [];\n    } catch {\n      return [];\n    }\n  },\n  getById: async id => unwrap(await API.get(`/groups/${id}`)),\n  create: async d => unwrap(await API.post('/groups', d)),\n  addMember: async (gId, uId) => unwrap(await API.post(`/groups/${gId}/members?userId=${uId}`)),\n  getMembers: async id => {\n    try {\n      return unwrap(await API.get(`/groups/${id}/members`)) || [];\n    } catch {\n      return [];\n    }\n  },\n  searchUsers: async q => {\n    try {\n      return unwrap(await API.get(`/groups/search-users?q=${encodeURIComponent(q)}`)) || [];\n    } catch {\n      return [];\n    }\n  },\n  joinByCode: async code => unwrap(await API.post(`/groups/join/${code}`))\n};\nexport const expenseAPI = {\n  getByGroup: async gId => {\n    try {\n      const d = unwrap(await API.get(`/expenses/group/${gId}?page=0&size=50`));\n      return Array.isArray(d) ? d : (d === null || d === void 0 ? void 0 : d.content) || [];\n    } catch {\n      return [];\n    }\n  },\n  create: async d => unwrap(await API.post('/expenses', d)),\n  getById: async id => unwrap(await API.get(`/expenses/${id}`))\n};\nexport const settlementAPI = {\n  getPending: async () => {\n    try {\n      return unwrap(await API.get('/settlements/pending')) || [];\n    } catch {\n      return [];\n    }\n  },\n  getByGroup: async gId => {\n    try {\n      return unwrap(await API.get(`/settlements/group/${gId}`)) || [];\n    } catch {\n      return [];\n    }\n  },\n  settle: async (id, paymentMethod, txId) => unwrap(await API.post(`/settlements/${id}/settle`, {\n    paymentMethod: paymentMethod || null,\n    transactionId: txId || null\n  })),\n  sendReminder: async id => unwrap(await API.post(`/settlements/${id}/remind`))\n};\nexport const dashboardAPI = {\n  get: async () => {\n    try {\n      return unwrap(await API.get('/dashboard')) || {};\n    } catch {\n      return {};\n    }\n  }\n};\nexport { errMsg };","map":{"version":3,"names":["axios","API","create","baseURL","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","res","err","_err$response","_err$config","_err$config$url","status","url","includes","clear","window","location","href","Promise","reject","unwrap","body","data","errMsg","_err$response2","_err$response2$data","_err$response3","_err$response3$data","message","authAPI","register","d","post","login","groupAPI","getAll","get","getById","id","addMember","gId","uId","getMembers","searchUsers","q","encodeURIComponent","joinByCode","code","expenseAPI","getByGroup","Array","isArray","content","settlementAPI","getPending","settle","paymentMethod","txId","transactionId","sendReminder","dashboardAPI"],"sources":["D:/SmartSplitter/splitsmart-frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  headers: { 'Content-Type': 'application/json' },\n  timeout: 15000,\n});\n\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\nAPI.interceptors.response.use(\n  res => res,\n  err => {\n    if (err.response?.status === 401 && !err.config?.url?.includes('/auth/')) {\n      localStorage.clear();\n      window.location.href = '/login';\n    }\n    return Promise.reject(err);\n  }\n);\n\n// Backend wraps everything: { success, message, data: <actual payload> }\nconst unwrap = (res) => {\n  const body = res.data;\n  if (body && typeof body === 'object' && 'data' in body) return body.data;\n  return body;\n};\n\nconst errMsg = (err) =>\n  err?.response?.data?.message ||\n  err?.response?.data?.data ||\n  err?.message ||\n  'Something went wrong';\n\nexport const authAPI = {\n  register: async (d) => unwrap(await API.post('/auth/register', d)),\n  login:    async (d) => unwrap(await API.post('/auth/login', d)),\n};\n\nexport const groupAPI = {\n  getAll:      async ()         => { try { return unwrap(await API.get('/groups')) || []; } catch { return []; } },\n  getById:     async (id)       => unwrap(await API.get(`/groups/${id}`)),\n  create:      async (d)        => unwrap(await API.post('/groups', d)),\n  addMember:   async (gId, uId) => unwrap(await API.post(`/groups/${gId}/members?userId=${uId}`)),\n  getMembers:  async (id)       => { try { return unwrap(await API.get(`/groups/${id}/members`)) || []; } catch { return []; } },\n  searchUsers: async (q)        => { try { return unwrap(await API.get(`/groups/search-users?q=${encodeURIComponent(q)}`)) || []; } catch { return []; } },\n  joinByCode:  async (code)     => unwrap(await API.post(`/groups/join/${code}`)),\n};\n\nexport const expenseAPI = {\n  getByGroup: async (gId) => {\n    try {\n      const d = unwrap(await API.get(`/expenses/group/${gId}?page=0&size=50`));\n      return Array.isArray(d) ? d : (d?.content || []);\n    } catch { return []; }\n  },\n  create:  async (d)  => unwrap(await API.post('/expenses', d)),\n  getById: async (id) => unwrap(await API.get(`/expenses/${id}`)),\n};\n\nexport const settlementAPI = {\n  getPending:   async ()    => { try { return unwrap(await API.get('/settlements/pending')) || []; } catch { return []; } },\n  getByGroup:   async (gId) => { try { return unwrap(await API.get(`/settlements/group/${gId}`)) || []; } catch { return []; } },\n  settle:       async (id, paymentMethod, txId) =>\n    unwrap(await API.post(`/settlements/${id}/settle`, { paymentMethod: paymentMethod || null, transactionId: txId || null })),\n  sendReminder: async (id)  => unwrap(await API.post(`/settlements/${id}/remind`)),\n};\n\nexport const dashboardAPI = {\n  get: async () => { try { return unwrap(await API.get('/dashboard')) || {}; } catch { return {}; } },\n};\n\nexport { errMsg };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}